(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a893ecf"],{"32e7":function(t,e,i){},"3f5e":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));i("d3b7"),i("caad"),i("2532");var a=i("bc3a"),s=i.n(a),n=i("5c96"),r=i("81ae");s.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var o=s.a.create({baseURL:"/file-api",timeout:3e4});function c(t){return o({url:"/group1/upload",method:"post",data:t})}o.interceptors.request.use((function(t){return t}),(function(t){Promise.reject(t)})),o.interceptors.response.use((function(t){var e=t.data.code||200,i=r["a"][e]||t.data.msg||r["a"]["default"];return 500===e?(Object(n["Message"])({message:i,type:"error"}),Promise.reject(new Error(i))):200!==e?(n["Notification"].error({title:i}),Promise.reject("error")):t.data}),(function(t){var e=t.message;return"Network Error"==e?e="后端接口连接异常":e.includes("timeout")?e="系统接口请求超时":e.includes("Request failed with status code")&&(e="系统接口"+e.substr(e.length-3)+"异常"),Object(n["Message"])({message:e,type:"error",duration:5e3}),Promise.reject(t)}))},"4f1f":function(t,e,i){},"69d9":function(t,e){t.exports="data:image/png;base64,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"},8780:function(t,e){t.exports="data:image/png;base64,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"},"89f3":function(t,e,i){"use strict";i("4f1f")},"8c9e":function(t,e,i){},ac1b:function(t,e,i){"use strict";i("32e7")},b3ca:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",attrs:{id:"app-container"}},[i("div",{staticClass:"previous-container"},[i("div",{staticClass:"row"},[i("h4",{style:{marginBottom:"0px",color:"#FFFFFF"}},[t._v("节点溯源")]),t._m(0)]),i("div",{staticClass:"row"},[t.progressVisable?i("div",{staticClass:"row"},[i("div",{staticStyle:{"margin-right":"12px"}},[t._v("溯源中...")]),i("el-progress",{staticClass:"traceability-progress",attrs:{"text-inside":!0,"stroke-width":26,percentage:t.progressValue}})],1):i("div",{staticClass:"row"},[t.lastTraceInfo?i("div",{staticClass:"row"},[i("div",{staticClass:"traceability-text"},[t._v("上次溯源")]),i("div",{staticClass:"traceability-text"},[t._v("时间："+t._s(t.lastTraceInfo.date))]),i("div",{staticClass:"traceability-text"},[t._v(" 节点数量："+t._s(t.lastTraceInfo.nodeCount)+" ")]),i("div",{staticClass:"traceability-text"},[t._v(" 操作人："+t._s(t.lastTraceInfo.operator)+" ")]),i("div",{staticClass:"row"},[i("div",{staticClass:"traceability-text"},[t._v("结果：")]),i("div",{style:{color:!0===t.lastTraceInfo.success?"#7ed321":"#d02d02"}},[t._v(" "+t._s(!0===t.lastTraceInfo.success?"溯源无误":"溯源异常")+" ")])])]):t._e()]),i("el-button",{style:{marginLeft:"16px"},attrs:{type:"primary",disabled:t.progressVisable},on:{click:t.handleValid}},[t._v("溯源")])],1)]),i("div",{staticClass:"content-page"},[i("div",{staticClass:"page-top"},[i("div",{staticClass:"mind-container-wrapper"},[i("div",{ref:"mind",attrs:{id:"mindContainer"}}),i("el-dialog",{attrs:{title:"",visible:t.dialogVisible,customClass:"customWidth"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleCancle}},[i("div",{staticClass:"topDemo"},[i("div",[t.currentNode?i("div",{staticClass:"node-info"},[i("div",{staticClass:"row",staticStyle:{margin:"3px 0"}},[i("div",{staticClass:"message-blod"},[t._v(" "+t._s("文件版本："+t.currentNode.version)+" ")]),i("span",{staticClass:"m10"},[t._v("|")]),i("div",{staticClass:"message-blod"},[t._v(" "+t._s("所在区块号："+t.currentNode.blockHeight)+" ")]),i("span",{staticClass:"m10"},[t._v("|")]),i("div",{staticClass:"message-blod"},[t._v(" "+t._s("操作类型："+t.handleOptType(t.currentNode.optType))+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v("操作人")]),i("div",[t._v("：")]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.operatorName||"")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v("操作时间")]),i("div",[t._v("：")]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.createTime||"")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v("操作描述")]),i("div",[t._v("：")]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.description||"")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 链上交易码 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 链上交易码："),i("br"),t._v("区块链由区块链接形成，区块由多"),i("br"),t._v("笔交易构成，每笔交易都拥有自己"),i("br"),t._v("唯一的交易码，交易码存储在区块"),i("br"),t._v("中不可被篡改。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(t._s(t.currentNode.txid))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 文件摘要 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 文件摘要："),i("br"),t._v("文件摘要由文件本体计算而出，具"),i("br"),t._v("有唯一性，同一份文件计算出的摘"),i("br"),t._v("要相同。文件摘要可用于验证文件"),i("br"),t._v("一致性。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(t._s(t.currentNode.fileHash||""))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 附件总摘要 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 附件总摘要："),i("br"),t._v("附件总摘要由所有附件共同计算而"),i("br"),t._v("出，具有唯一性，如果其中某一份"),i("br"),t._v("附件发生改变，附件总摘要也会发"),i("br"),t._v("生变化，可用于验证附件集合的一"),i("br"),t._v("致性。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.attachmentTotalHash||"无")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 所在区块哈希号 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 所在区块哈希号："),i("br"),t._v("标识包含本次操作的交易所在区块"),i("br"),t._v("的哈希号，哈希号是区块唯一性的"),i("br"),t._v("标志，不可篡改。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(t._s(t.currentNode.blockHash||""))])])]):t._e()])]),i("div",{ref:"mindAnother",attrs:{id:"mind-containerAll"}})]),i("div",{staticClass:"btn-container"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"全屏",placement:"bottom","open-delay":1500}},[i("el-button",{staticClass:"normal-btn",attrs:{type:"text",icon:"el-icon-full-screen"},on:{click:t.handleFull}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"重置",placement:"bottom","open-delay":1500}},[i("el-button",{staticClass:"normal-btn",attrs:{type:"text",icon:"el-icon-refresh"},on:{click:t.handleResetChart}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"放大",placement:"bottom","open-delay":1500}},[i("el-button",{staticClass:"normal-btn",attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.handleEnlarge}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"缩小",placement:"bottom","open-delay":1500}},[i("el-button",{staticClass:"normal-btn",attrs:{type:"text",icon:"el-icon-minus"},on:{click:t.handleReduce}})],1)],1)],1),i("div",{staticClass:"node-describe-container"},[i("div",[t.currentNode?i("div",{staticClass:"node-info"},[i("div",{staticClass:"row"},[i("div",{staticClass:"message-blod"},[t._v(" "+t._s("文件版本："+t.currentNode.version)+" ")]),i("span",{staticClass:"m10"},[t._v("|")]),i("div",{staticClass:"message-blod"},[t._v(" "+t._s("所在区块号："+t.currentNode.blockHeight)+" ")]),i("span",{staticClass:"m10"},[t._v("|")]),i("div",{staticClass:"message-blod"},[t._v(" "+t._s("操作类型："+t.handleOptType(t.currentNode.optType))+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v("操作人")]),i("div",[t._v("：")]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.operatorName||"")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v("操作时间")]),i("div",[t._v("：")]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.createTime||"")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v("操作描述")]),i("div",[t._v("：")]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.description||"")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 链上交易码 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 链上交易码："),i("br"),t._v("区块链由区块链接形成，区块由多"),i("br"),t._v("笔交易构成，每笔交易都拥有自己"),i("br"),t._v("唯一的交易码，交易码存储在区块"),i("br"),t._v("中不可被篡改。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(t._s(t.currentNode.txid))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 文件摘要 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 文件摘要："),i("br"),t._v("文件摘要由文件本体计算而出，具"),i("br"),t._v("有唯一性，同一份文件计算出的摘"),i("br"),t._v("要相同。文件摘要可用于验证文件"),i("br"),t._v("一致性。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(t._s(t.currentNode.fileHash||""))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 附件总摘要 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 附件总摘要："),i("br"),t._v("附件总摘要由所有附件共同计算而"),i("br"),t._v("出，具有唯一性，如果其中某一份"),i("br"),t._v("附件发生改变，附件总摘要也会发"),i("br"),t._v("生变化，可用于验证附件集合的一"),i("br"),t._v("致性。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(" "+t._s(t.currentNode.attachmentTotalHash||"无")+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"row"},[i("div",{staticClass:"textDec"},[t._v(" 所在区块哈希号 "),i("el-tooltip",{attrs:{effect:"light",placement:"top-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 所在区块哈希号："),i("br"),t._v("标识包含本次操作的交易所在区块"),i("br"),t._v("的哈希号，哈希号是区块唯一性的"),i("br"),t._v("标志，不可篡改。 ")]),i("i",{staticClass:"el-icon-info"})])],1),i("div",[t._v("：")])]),i("div",{staticClass:"message"},[t._v(t._s(t.currentNode.blockHash||""))])])]):t._e()]),t.currentNode?i("div",{staticClass:"opt-container"},[i("el-button",{staticClass:"reset-btn",attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("增加附件")]),i("el-button",{staticClass:"reset-btn",attrs:{type:"text",icon:"el-icon-edit"},on:{click:t.handleUpdate}},[t._v("修改文件")])],1):t._e()])]),i("div",{staticClass:"page-bot"},[i("div",{staticClass:"file-container"},[i("el-table",{attrs:{data:t.dataFiles,"row-key":"id",stripe:""}},[i("el-table-column",{attrs:{label:"原始文件",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{style:{color:e.row.id===t.currentAttachmentId?"#1890ff":"",cursor:"pointer"},on:{click:function(i){return t.handleFile(e.row,e.row.id)}}},[t._v(" "+t._s(e.row.fileName||"")+" ")])]}}])})],1),i("el-table",{attrs:{data:t.attachments,"row-key":"id"}},[i("el-table-column",{attrs:{label:"附件",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{style:{color:e.row.id===t.currentAttachmentId?"#1890ff":"",cursor:"pointer"},on:{click:function(i){return t.handleFile(e.row,e.row.id)}}},[t._v(" "+t._s(e.row.fileName||"")+" ")])]}}])})],1)],1),i("div",{staticClass:"imgPreviewContainer"},[i("div",{staticClass:"row between",style:{width:"100%",marginBottom:"16px"}},[i("div",[t._v(" "+t._s(t.currentAttachment&&t.currentAttachment.fileName||"")+" ")]),i("div",[t._v("文件内容预览")]),i("div",{staticClass:"row"},[i("el-button",{attrs:{size:"mini",type:"primary",loading:t.downloadLoading},on:{click:t.handleDownload}},[t._v("下载")]),i("el-button",{attrs:{size:"mini",type:"primary",loading:t.downloadAllLoading},on:{click:t.handleDownloadBlockFile}},[t._v("下载区块全部文件")])],1)]),i("div",{staticClass:"file-wrapper"},[t.ifTxtFile?i("div",{staticClass:"preview-txt-container"},[t._v(" "+t._s(t.fileContent)+" ")]):i("iframe",{staticClass:"preview-iframe",attrs:{src:t.previewUrl,width:"100%",height:"100%"}})])])])]),i("el-dialog",{staticClass:"dialog",attrs:{title:t.title,visible:t.visable},on:{"update:visible":function(e){t.visable=e}}},[i("el-form",{ref:"form",attrs:{model:t.formParams,rules:t.formRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"数据名称",prop:"fileName"}},[i("el-input",{attrs:{placeholder:"数据名称",clearable:"",size:"small",disabled:""},model:{value:t.formParams.model.fileName,callback:function(e){t.$set(t.formParams.model,"fileName",e)},expression:"formParams.model.fileName"}})],1),i("el-form-item",{attrs:{label:"数据文件",prop:"file"}},[i("el-upload",{ref:"fileUpload",attrs:{action:"",limit:1,accept:".jpg,.png,.pdf,.doc","file-list":t.formParams.fileList,"before-upload":t.handleBeforeUpload,"before-remove":t.beforeRemove,"on-exceed":t.handleExceed,"http-request":t.uploadDataFile,disabled:"增加"===t.title}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:"增加"===t.title}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 可上传jpg/png/pdf/doc格式文件 ")])],1)],1),i("el-form-item",{attrs:{label:"数据类型",prop:"evidenceType"}},[i("el-input",{attrs:{placeholder:"数据类型",size:"small",disabled:""},model:{value:t.formParams.model.evidenceTypeName,callback:function(e){t.$set(t.formParams.model,"evidenceTypeName",e)},expression:"formParams.model.evidenceTypeName"}})],1),i("el-form-item",{attrs:{label:"文件描述",prop:"description"}},[i("el-input",{attrs:{type:"textarea",placeholder:"文件描述",autosize:{minRows:6,maxRows:10}},model:{value:t.formParams.description,callback:function(e){t.$set(t.formParams,"description",e)},expression:"formParams.description"}})],1),i("el-form-item",{attrs:{label:"附件"}},[i("el-upload",{ref:"attachmentUpload",attrs:{action:"",accept:".jpg,.png,.pdf,.doc","file-list":t.formParams.attachmentFileList,"before-upload":t.handleBeforeUploadAttachment,"before-remove":t.beforeRemoveAttachment,"http-request":t.uploadAttachmentFile}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 可上传jpg/png/pdf/doc格式文件 ")])],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleCancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确 定")])],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tip-container"},[a("p",{staticClass:"tipinfo"},[a("img",{attrs:{src:i("69d9")}}),t._v("原始文件 ")]),a("p",{staticClass:"tipinfo"},[a("img",{attrs:{src:i("8780")}}),t._v("复制操作 ")]),a("p",{staticClass:"tipinfo"},[a("img",{attrs:{src:i("c4f5")}}),t._v("修改操作 ")]),a("p",{staticClass:"tipinfo"},[a("img",{attrs:{src:i("d47e")}}),t._v("增加操作 ")])])}],n=(i("4de4"),i("d81d"),i("99af"),i("ac1f"),i("1276"),i("a4d3"),i("e01a"),i("b0c0"),i("30d1")),r=i.n(n),o=i("b775"),c=i("db3f");function l(t){return Object(o["a"])({url:"/edg/evidence/detail/"+t,method:"get"})}var d=i("ff43"),f=i("3f5e"),u=(i("6821"),["#99d0ff","#e3d5bb","#cfcfcf","#f89aa4"]),h={inject:["reload"],data:function(){var t=this,e=function(e,i,a){t.formParams.fileList.length>0?a():a(new Error("数据文件不能为空"))};return{dialogVisible:!1,originNodeId:null,nodeListData:[],mindChart:null,evidenceNodeId:"",downloadLoading:!1,downloadAllLoading:!1,dataFiles:[],attachments:[],currentAttachment:null,ifTxtFile:!1,fileContent:"",currentAttachmentId:"",currentNode:null,lastTraceInfo:null,progressVisable:!1,progressValue:0,fileServer:null,previewServer:null,previewUrl:null,nodes:[],newestNode:null,nodeTree:{},title:"",visable:!1,formParams:{description:"",model:{},fileList:[],attachmentFileList:[],oldAttachmentFileList:[],fileName:null,evidenceTypeName:null},formRules:{file:[{required:!0,validator:e}],description:[{required:!0,message:"描述不能为空",trigger:"blur"}]}}},computed:{defaultFileChange:function(){var t=this.fileServer,e=this.previewServer,i=this.dataFiles;return{fileServer:t,previewServer:e,dataFiles:i}}},watch:{defaultFileChange:function(t,e){if(this.fileServer&&this.previewServer&&this.dataFiles.length){var i=this.dataFiles[0];this.handleFile(i,i.id)}}},mounted:function(){var t=this,e=JSON.parse(this.$route.query.item);this.evidenceNodeId=e.originNodeId,this.originNodeId=e.originNodeId,this.evidenceTypeName=e.evidenceTypeName,this.fileName=e.fileName,this.getEvidenceNode(),this.getEvidenceAttachment(this.evidenceNodeId),this.getLastVerifyInfo(),this.getServer(),window.onresize=function(){t.pageResize(t.reload,300)}},methods:{pageResize:function(t,e){return function(i){var a=this,s=i;clearTimeout(t.timer),t.timer=setTimeout((function(){t.call(a,s)}),e)}()},handleCancle:function(){this.drawMindChart("mind-container","mind")},getEvidenceNode:function(){var t=this,e=JSON.parse(this.$route.query.item),i=e.originNodeId||"";this.originNodeId=i,l(i).then((function(e){var i=e.data||[];t.nodeListData=i,t.handleNodeTree()}))},handleNodeTree:function(){var t=this,e=this.nodeListData,i=e.filter((function(e){return e.style={fill:u[e.nodeType],lineWidth:e.id==t.originNodeId?2:0},e.type=t.nodeShape(e.optType),e.size=t.nodeSize(e.optType),e}));this.nodes=i;var a=this.handleTree(i,"id","parentId");this.nodeTree=a.length>0?a[0]:{},this.drawDagreChart("mindContainer","mind"),this.$nextTick((function(){t.handleNode(parseInt(t.originNodeId))}));for(var s=i.filter((function(t){return 0===t.nodeType})),n={id:-1},r=0;r<s.length;r++){var o=s[r];o.id>n.id&&(n=o)}this.newestNode=n},getEvidenceAttachment:function(t){var e=this,i=this.loadingView({background:"rgba(0, 0, 0, 0)"});Object(d["c"])(t).then((function(t){i.close(),e.dataFiles=[],e.attachments=[];var a=t.data||[];a.map((function(t){"0"===t.bizType&&e.dataFiles.push(t),"1"===t.bizType&&e.attachments.push(t)}))})).catch((function(){i.close()}))},getLastVerifyInfo:function(){var t=this;Object(d["h"])(this.originNodeId).then((function(e){t.lastTraceInfo=e.data}))},getServer:function(){var t=this;this.getConfigKey("edg.file.server").then((function(e){200===e.code&&(t.fileServer=e.msg)})),this.getConfigKey("edg.file.preview").then((function(e){200===e.code&&(t.previewServer=e.msg)}))},handleFile:function(t,e){var i=this;this.currentAttachment=t,this.currentAttachmentId=e;var a=["json","md"];if(a.indexOf(t.fileType)>-1)this.ifTxtFile=!0,this.fileContent="请稍后...",Object(o["a"])({url:encodeURI(this.fileServer+t.filePath),method:"get"}).then((function(t){i.fileContent=t||"未知错误"})).catch((function(){i.fileContent="未知错误"}));else{this.ifTxtFile=!1;var s=t.filePath;this.previewUrl=this.previewServer+"/onlinePreview?url="+encodeURIComponent(this.fileServer+s)}},handleValid:function(){var t=this;this.progressVisable=!0;var e=setInterval((function(){t.progressValue+=3,t.progressValue>=70&&clearInterval(e)}),90),i=new Date;Object(d["f"])(this.evidenceNodeId).then((function(e){var a=new Date;a-i<3e3?setTimeout((function(){t.progressValue=100,setTimeout((function(){if(t.progressVisable=!1,t.progressValue=0,200===e.code){var i=e.data;e.data.success?t.$message({message:"溯源无误",type:"success"}):t.$message.error(i.err)}t.getLastVerifyInfo()}),1e3)}),3e3-(a-i)):(t.progressValue=100,setTimeout((function(){t.progressVisable=!1,t.progressValue=0}),1e3))})).catch((function(){t.progressVisable=!1,t.progressValue=0}))},drawDagreChart:function(t,e){this.$refs.ref&&(this.$refs.ref.innerHTML="");var i=this,a=this.nodeTree,s=new r.a.TreeGraph({container:t,width:document.getElementById(t).scrollWidth||500,height:300|document.getElementById(t).scrollHeight,fitCenter:!0,animate:!1,modes:{default:[{onChange:function(t,e){var i=t.get("model").data;return i.collapsed=e,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:18,anchorPoints:[[0,.5],[1,.5]],style:{fill:"#99d0ff",lineWidth:0}},defaultEdge:{type:"line",style:{stroke:"#A3B1BF"}},layout:{type:"compactBox",direction:"LR",getId:function(t){return t.id},getSize:function(t){return 12},getHeight:function(){return 12},getWidth:function(){return 12},getVGap:function(){return 28},getHGap:function(){return 28}}});if(s.on("node:click",(function(t){t.item;for(var e=0;e<i.nodeListData.length;e++){var a=i.nodeListData[e].id,n=s.findById(a),r=n.getModel();r.style.lineWidth=a==t.item._cfg.id?2:0}s.changeData(),i.handleNode(t.item._cfg.id)})),s.node((function(t){return{label:"".concat(t.version,"\n").concat(t.operatorName),labelCfg:{offset:i.nodeOffset(t.optType),position:"bottom",size:10,style:{fill:"#e3dcdc"}}}})),s.data(a),s.render(),s.fitCenter(),s.changeData(),"mindContainer"===t){var n=s.findById(i.originNodeId);s.focusItem(n,!0,{easing:"easeCubic",duration:0}),i.mindChart=s}},handleDownload:function(){var t=this;this.currentAttachment.filePath,this.fileServer;try{this.downloadLoading=!0,setTimeout((function(){t.downloadLoading=!1}),2e3),Object(c["downloadFile"])(["".concat(this.fileServer).concat(this.currentAttachment.filePath)],this.currentAttachment.fileName.split(".")[0])}catch(e){this.$message.error("下载出错")}},handleDownloadBlockFile:function(){var t=this,e=this.dataFiles.length?"".concat(this.fileServer).concat(this.dataFiles[0].filePath):"",i=[];this.attachments.map((function(e){i.push("".concat(t.fileServer).concat(e.filePath))}));var a=this.currentNode,s=a.operatorName,n=a.version,r="区块文件_".concat(s,"_").concat(n);this.downloadAllLoading=!0,setTimeout((function(){t.downloadAllLoading=!1}),2e3),Object(c["downloadFile"])([e].concat(i),r)},handleNode:function(t){for(var e=t,i=0;i<this.nodeListData.length;i++){var a=this.nodeListData[i];a.id===e&&(this.currentNode=a)}this.currentAttachmentId=e,this.getEvidenceAttachment(e)},handleResetChart:function(){if(this.mindChart){this.mindChart.fitCenter();var t=this.mindChart.findById(this.currentNode.id);this.mindChart.focusItem(t,!0,{easing:"easeCubic",duration:0})}},handleEnlarge:function(){var t=this.mindChart;t.zoom(1.1)},handleReduce:function(){var t=this.mindChart;t.zoom(.9)},handleFull:function(){var t=this;this.dialogVisible=!0,this.$nextTick((function(){t.drawDagreChart("mind-containerAll","mindAnother")}))},handleAdd:function(){this.reset(),this.title="增加",this.getFiles()},handleUpdate:function(){this.reset(),this.title="修改",this.getFiles()},reset:function(){this.resetForm("form"),this.formParams={description:"",model:{},fileList:[],attachmentFileList:[],oldAttachmentFileList:[]}},handleCancel:function(){this.visable=!1},handleConfirm:function(){var t=this;this.formParams;this.formParams.model.id;this.$refs.form.validate((function(e){e&&("增加"===t.title?t.add():t.modify())}))},add:function(){for(var t=this,e=this.newestNode.id,i=this.formParams.description,a=[],s=this.formParams.oldAttachmentFileList.length,n=this.formParams.attachmentFileList,r=[],o=0;o<n.length;o++){var c=n[o];r.push(c.hash)}var l=this.md5Hashlist(r);if(n.length!==s){for(var f=s;f<n.length;f++){var u=n[f];a.push({fileName:u.name,hash:u.hash,size:u.size,uri:u.uri})}var h={evidenceNodeId:e,attachmentTotalHash:l,description:i,attachments:a},v=this.loadingView({text:"上链中..."});this.visable=!1,Object(d["a"])(h).then((function(e){v.close(),200===e.code&&(t.reload(),t.$message({message:"操作成功",type:"success"}))})).catch((function(t){v.close()}))}else this.$message({message:"未上传新文件",type:"error"})},modify:function(){for(var t=this,e=this.formParams.model.id,i=this.formParams.description,a=this.formParams.fileList[0],s={fileName:a.name,hash:a.hash,size:a.size,uri:a.uri},n=[],r=this.formParams.attachmentFileList,o=[],c=0;c<r.length;c++){var l=r[c];o.push(l.hash)}var f=this.md5Hashlist(o);if(this.currentNode.fileHash!==a.hash||f!==this.currentNode.attachmentTotalHash){for(var u=0;u<r.length;u++){var h=r[u];n.push({fileName:h.name,hash:h.hash,size:h.size,uri:h.uri})}var v={evidenceNodeId:e,description:i,attachments:n,attachmentTotalHash:f,dataFile:s},m=this.loadingView({text:"上链中..."});this.visable=!1,Object(d["k"])(v).then((function(e){m.close(),200===e.code&&(t.reload(),t.$message({message:"操作成功",type:"success"}))})).catch((function(t){m.close()}))}else this.$message({message:"没有文件修改",type:"error"})},getFiles:function(){var t=this,e=this.newestNode;Object(d["d"])(e.id).then((function(i){var a=e;a.fileName=t.fileName;var s=i.data.dataFile||{},n=i.data.attachments||[],r=[{name:s.fileName,uri:s.uri,hash:s.hash,size:s.size}],o=[];n.map((function(t){o.push({name:t.fileName,uri:t.uri,hash:t.hash,size:t.size})})),t.formParams.model=a,t.formParams.model.evidenceTypeName=t.evidenceTypeName,t.formParams.model.fileName=t.fileName,t.formParams.description=e.description,t.formParams.fileList=r,t.formParams.attachmentFileList=o,t.formParams.oldAttachmentFileList=JSON.parse(JSON.stringify(o)),t.visable=!0}))},handleBeforeUpload:function(t){return!0},handleExceed:function(t,e){this.$message.error("只能上传 1 个文件")},beforeRemove:function(t,e){return this.formParams.fileList=[],!0},uploadDataFile:function(t){var e=this,i=t.file,a=this.formParams.model.evidenceTypeName||"未知类型",s=new window.FormData;s.append("file",i),s.append("scene",a),s.append("output","json");var n=this.loadingView({background:"rgba(0, 0, 0, 0)"});Object(f["a"])(s).then((function(t){if(n.close(),t.path&&t.path.length>0){var a=i.name||"未知文件",s=t.path||"未知路径",r=t.md5||"未知hash",o=t.size||0,c={name:a,uri:s,hash:r,size:o};e.formParams.fileList.push(c)}else e.$message.error("文件上传失败")})).catch((function(t){n.close()}))},handleBeforeUploadAttachment:function(t){for(var e=!0,i=this.formParams.attachmentFileList,a=0;a<i.length;a++){var s=i[a];if(t.name===s.name&&t.size===s.size){e=!1,this.$message.error("此文件已存在");break}}return e},beforeRemoveAttachment:function(t,e){if("增加"===this.title){var i=!1;return this.formParams.oldAttachmentFileList.map((function(e){t.name===e.name&&t.hash===e.hash&&(i=!0)})),i?(this.$message.error("不可移除之前的文件"),!1):(this.formParams.attachmentFileList=e,!0)}return this.formParams.attachmentFileList=e,!0},uploadAttachmentFile:function(t){var e=this,i=t.file,a=this.formParams.model.evidenceTypeName||"未知类型",s=new window.FormData;s.append("file",i),s.append("scene",a),s.append("output","json");var n=this.loadingView({background:"rgba(0, 0, 0, 0)"});Object(f["a"])(s).then((function(t){if(n.close(),t.path&&t.path.length>0){var a=i.name||"未知文件",s=t.path||"未知路径",r=t.md5||"未知hash",o=t.size||0,c={name:a,uri:s,hash:r,size:o};e.formParams.attachmentFileList.push(c)}else e.$message.error("文件上传失败")})).catch((function(t){n.close()}))}}},v=h,m=(i("89f3"),i("ac1b"),i("ca95"),i("2877")),p=Object(m["a"])(v,a,s,!1,null,"3948de26",null);e["default"]=p.exports},c4f5:function(t,e,i){t.exports=i.p+"static/img/star.0651fcff.png"},ca95:function(t,e,i){"use strict";i("8c9e")},d47e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABMCAYAAAAhvppvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEk0AABJNAfOXxKcAAALISURBVHhe7dzPahNRHMVx38WF4AO4c+MrCG7EP4uCoCs3PkHXijZodyJiEQUNuKxuOtBNV4pF0biqCSJUAy1NMsnMeM5lbpiR6XDWmVP4wPROU/h9mUwDvcyZoig2IYERTCCDHLrwxTk5L+c+gG1Yh8twAc7DOUZK+sl80Oun40dv0hTyUtEBcVbOfQif4BWswx00uYk21xhpyEBrG7PpjYezDPJS0QFx1gWcwC/4CNvwGk2eo80zRpqgWorF7OqDWV4qOiTOPIcTOIQD+I4mX9HmCyNlOAhXEE50LVAUZ1/ADBjrGE2O0OaIkcL70pGW+I5iLL4FF2izYKRwE8NC7YVbe1nxbj/vkvzpblaNFS4cXkCnRuILd4dFp3DmagM2YRtHqnAkgSMJHEngSAJHEjiSwJEEjiRwJIEjCRxJ4EgCRxI4ksCRBI4kcCSBIwkcSeBIAkcSOJLAkQSOJGiL1LgXwJHqkbirxJGgLdIUB3Ms1PYnOVI9ErfBcS9OihMxlCP9F2mAg99Y4MYl7ssJV5Mj1SN9xsEIC8c4wS1xjtQQyVdSqS2S70mltkj+61Zqi+TPSaW2SP7EXWqLFA64UP0BR3KkRo4kcCSBIwkcSeBIAkcSOJLAkQSOJHAkgSMJHEngSAJHEjiSwJEEjiRwJIEjCRxJ4EiCtkj+v1upLVLj85McqR6p8UlcjlSPNMTBXyxMcWK59YbPEsKLwhacjsi39k5/ftIODr5h4Q9OxFC1q6oj4rycnWpP4urh4D0WBjjBUNzMVd2r1IVQ1UCcfQK1Z7rdwsFjLHzAiX34CWPgVRVDNf3iVVENxJk5+xB+oMny6YCXev309trG7D4WX8IODGAMvKGH9yaEG9kKivNxVs7M2RN4iyYv4nMmz/aT+UV8cwXV7sITSGAE/MsXNnlBuNOvIM7GGTkrZ+bsm3APTdb6yfz6P7JRiYMcnbBuAAAAAElFTkSuQmCC"},db3f:function(t,e,i){"use strict";i.r(e),i.d(e,"downloadFile",(function(){return d})),i.d(e,"getFile",(function(){return h}));i("159b"),i("ac1f"),i("1276"),i("d3b7"),i("3ca3"),i("ddb0"),i("25f0"),i("96cf");var a=i("1da1"),s=i("21a6"),n=i.n(s),r=i("c4e3"),o=i.n(r),c=i("bc3a"),l=i.n(c);function d(t,e){f(t,e)}function f(t,e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var a,s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,s=new o.a,r={},c=[],t.next=6,a.forEach((function(t){var e=h(t).then((function(e){var i=t.split("/"),a=i[i.length-1];s.file(a,e,{binary:!0}),r[a]=e}));c.push(e)}));case 6:Promise.all(c).then((function(){s.generateAsync({type:"blob"}).then((function(t){n.a.saveAs(t,i+".zip")})).catch((function(t){message.error("网络出现了一点小问题，请稍后重试")}))}));case 7:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function h(t){return new Promise((function(e,i){l()({method:"get",url:t,responseType:"arraybuffer"}).then((function(t){e(t.data)})).catch((function(t){i(t.toString())}))}))}},ff43:function(t,e,i){"use strict";i.d(e,"i",(function(){return s})),i.d(e,"j",(function(){return n})),i.d(e,"e",(function(){return r})),i.d(e,"q",(function(){return o})),i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"k",(function(){return d})),i.d(e,"d",(function(){return f})),i.d(e,"l",(function(){return u})),i.d(e,"o",(function(){return h})),i.d(e,"p",(function(){return v})),i.d(e,"g",(function(){return m})),i.d(e,"n",(function(){return p})),i.d(e,"m",(function(){return g})),i.d(e,"c",(function(){return b})),i.d(e,"f",(function(){return C})),i.d(e,"h",(function(){return A}));var a=i("b775");function s(){return Object(a["a"])({url:"/edg/type/select",method:"get"})}function n(t){return Object(a["a"])({url:"/edg/evidence/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/edg/node/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/edg/evidence/valid/"+t,method:"get"})}function c(t){return Object(a["a"])({url:"/edg/evidence/create",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/edg/evidence/add",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/edg/evidence/modify",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/edg/node/attachment/"+t,method:"get"})}function u(t,e,i,s,n,r){var o={evidenceId:t,title:e,categoryId:i,tagIds:s,keywords:n,content:r};return Object(a["a"])({url:"/cms/article",method:"post",data:o})}function h(){return Object(a["a"])({url:"/edg/evidence/personal/list/latest",method:"get"})}function v(){return Object(a["a"])({url:"/edg/evidence/personal/node/list/latest",method:"get"})}function m(){return Object(a["a"])({url:"/edg/evidence/opt/type/statistics",method:"get"})}function p(){return Object(a["a"])({url:"/edg/evidence/quote/statistics",method:"get"})}function g(){return Object(a["a"])({url:"/edg/evidence/quote/top10/statistics",method:"get"})}function b(t){return Object(a["a"])({url:"/edg/attachment/list/"+t,method:"get"})}function C(t){return Object(a["a"])({url:"/edg/node/verify/"+t,method:"get"})}function A(t){return Object(a["a"])({url:"/edg/node/last/verify/info/"+t,method:"get"})}}}]);